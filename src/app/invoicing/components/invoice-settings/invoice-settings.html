<div class="dashboard-container">
    <app-nav-bar [title]="navTitle"></app-nav-bar>
    <div class="main-content" style="max-width: 600px; margin-left: auto; margin-right: auto; margin-bottom: 1.5rem;">
       
        <h2 class="text-3xl font-semibold mb-6" style="font-size: 1.875rem; font-weight: 600; margin-bottom: 1.5rem;">
            Settings</h2>

        <div class="settings-tabs" id="settings-tabs"
            style="max-width: 600px; margin-left: auto; margin-right: auto; margin-bottom: 1.5rem;">
            <span class="tab active" data-tab="profile">Profile</span>
            <span class="tab" data-tab="billing">Billing</span>
            <span class="tab" data-tab="security">Security</span>
        </div>

        <!-- Content Area - Reactive Form Sample -->
        <div id="content-profile" class="setting-content">
            <div class="setting-card">
                 <div *ngIf="loadingError" style="background-color: red;padding: 10px; color: white; margin-bottom: 1rem;"> 
            Error loading settings. Please try again later.
        </div>
                <h3 style="font-size: 1.25rem; font-weight: 500; margin-bottom: 1rem;">User Profile Settings</h3>

                <div *ngIf="loading" class="text-center py-6">Loading settings...</div>
                <form *ngIf="!loading" [formGroup]="settingsForm" (ngSubmit)="createOrUpdateInvoiceSettings()">

                    <!-- Company Info -->
                    <h4 style="margin-top: 1.5rem; font-weight: 600;">Company Information</h4>

                    <div class="form-group">
                        <label for="companyName" class="form-label">Company Name</label>
                        <input id="companyName" type="text" class="form-input" formControlName="companyName">
                    </div>

                    <div class="form-group">
                        <label for="registrationNumber" class="form-label">Registration Number</label>
                        <input id="registrationNumber" type="text" class="form-input"
                            formControlName="registrationNumber">
                    </div>

                    <div class="form-group">
                        <label for="vatNumber" class="form-label">VAT Number</label>
                        <input id="vatNumber" type="text" class="form-input" formControlName="vatNumber">
                    </div>

                    <div class="form-group">
                        <label for="vatRate" class="form-label">VAT Rate (%)</label>
                        <input id="vatRate" type="number" class="form-input" formControlName="vatRate">
                    </div>

                    <div class="form-group">
                        <label for="emailAddress" class="form-label">Email Address</label>
                        <input id="emailAddress" type="email" class="form-input" formControlName="emailAddress">
                    </div>

                    <div class="form-group">
                        <label for="telephone" class="form-label">Telephone</label>
                        <input id="telephone" type="text" class="form-input" formControlName="telephone">
                    </div>

                    <div class="form-group">
                        <label for="invoiceNotes" class="form-label">Invoice Notes</label>
                        <textarea id="invoiceNotes" class="form-input" formControlName="invoiceNotes"></textarea>
                    </div>

                    <!-- Bank Details -->
                    <h4 style="margin-top: 1.5rem; font-weight: 600;">Bank Details</h4>

                    <div class="form-group">
                        <label for="accountNumber" class="form-label">Account Number</label>
                        <input id="accountNumber" type="number" class="form-input" formControlName="accountNumber">
                    </div>

                    <div class="form-group">
                        <label for="bankName" class="form-label">Bank Name</label>
                        <input id="bankName" type="text" class="form-input" formControlName="bankName">
                    </div>

                    <div class="form-group">
                        <label for="branchName" class="form-label">Branch Name</label>
                        <input id="branchName" type="text" class="form-input" formControlName="branchName">
                    </div>

                    <div class="form-group">
                        <label for="branchCode" class="form-label">Branch Code</label>
                        <input id="branchCode" type="text" class="form-input" formControlName="branchCode">
                    </div>

                    <!-- Address Details -->
                    <h4 style="margin-top: 1.5rem; font-weight: 600;">Address Details</h4>

                    <div class="form-group">
                        <label for="addressLineOne" class="form-label">Address Line 1</label>
                        <input id="addressLineOne" type="text" class="form-input" formControlName="addressLineOne">
                    </div>

                    <div class="form-group">
                        <label for="addressLineTwo" class="form-label">Address Line 2</label>
                        <input id="addressLineTwo" type="text" class="form-input" formControlName="addressLineTwo">
                    </div>

                    <div class="form-group">
                        <label for="suburb" class="form-label">Suburb</label>
                        <input id="suburb" type="text" class="form-input" formControlName="suburb">
                    </div>

                    <div class="form-group">
                        <label for="city" class="form-label">City</label>
                        <input id="city" type="text" class="form-input" formControlName="city">
                    </div>

                    <div class="form-group">
                        <label for="province" class="form-label">Province</label>
                        <input id="province" type="text" class="form-input" formControlName="province">
                    </div>

                    <div class="form-group">
                        <label for="country" class="form-label">Country</label>
                        <input id="country" type="text" class="form-input" formControlName="country">
                    </div>

                    <div class="form-group">
                        <label for="postalCode" class="form-label">Postal Code</label>
                        <input id="postalCode" type="number" class="form-input" formControlName="postalCode">
                    </div>

                    <div class="save-area">
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>


            </div>
        </div>

        <div id="content-billing" class="setting-content" style="display:none;">
            <div class="setting-card">
                <h3 style="font-size: 1.25rem; font-weight: 500; margin-bottom: 1rem;">Billing Information</h3>
                <p style="color: #6b7280;">This section would contain subscription details and payment methods.</p>
            </div>
        </div>

        <div id="content-security" class="setting-content" style="display:none;">
            <div class="setting-card">
                <h3 style="font-size: 1.25rem; font-weight: 500; margin-bottom: 1rem;">Security & Access</h3>
                <p style="color: #6b7280;">This section would manage passwords and multi-factor authentication.</p>
            </div>
        </div>
    </div>
</div>